!function(t){var e={version:"0.1.2"},i=e.SelectorObject=function(t){var e=Object.create(Array.prototype);e=Array.apply(e);for(var n in i.prototype)i.prototype.hasOwnProperty(n)&&(e[n]=i.prototype[n]);for(var r=0;r<t.length;r++)e[r]=t[r];return e.isSelectorObject=!0,e};i.prototype={constructor:i,find:function(t){for(var e,n,r=[],s=0;s<this.length;s++){e=this[s].querySelectorAll(t);for(var o=0;o<e.length;o++)n=e[o],n&&r.indexOf(n)<0&&r.push(n);o=0}return new i(r)},filter:function(t){for(var e,n=[],r=0;r<this.length;r++)e=this[r],e.matches(t)&&n.push(e);return new i(n)},first:function(){var t=this[0]?[this[0]]:[];return new i(t)},last:function(){var t=this[this.length-1]?[this[this.length-1]]:[];return new i(t)},parent:function(){for(var t,e=[],n=0;n<this.length;n++)t=this[n].parentNode,e.indexOf(t)<0&&e.push(t);return new i(e)},children:function(t){for(var e,n,r=[],s=0;s<this.length;s++){e=this[s].children;for(var o=0;o<e.length;o++)n=e[o],n&&r.indexOf(n)<0&&(!t||n.matches(t))&&r.push(n);o=0}return new i(r)},remove:function(){for(var t=0;t<this.length;t++)this[t].parentElement.removeChild(this[t]);return new i([])},before:function(t){return this._html(t,"beforebegin",t.isSelectorObject)},after:function(t){return this._html(t,"afterend",t.isSelectorObject)},append:function(t){return this._html(t,"beforeend",t.isSelectorObject)},prepend:function(t){return this._html(t,"afterbegin",t.isSelectorObject)},html:function(t){return this._html(t,"replace",t.isSelectorObject)},_html:function(t,e,i){for(var n,r,s=0;s<this.length;s++)if(n=this[s],i){for(var o=0;o<t.length;o++)r=t[o],"replace"!==e?n.insertAdjacentHTML(e,r.outerHTML):n.innerHTML=r.outerHTML;o=0}else"replace"!==e?n.insertAdjacentHTML(e,t.outerHTML?t.outerHTML:t):n.innerHTML=t.outerHTML?t.outerHTML:t;return this}},e.onDOMReady=function(t,e,i){e||(e=[]),i||(i=this),func=function(){t.apply(i,e)},"loading"!=document.readyState?func():document.addEventListener("DOMContentLoaded",func)};var n=e.Application=function(t){this.views=[]};n.prototype={getView:function(t){for(var e in this.views)if(this.views[e].id===t)return this.views[e]},addView:function(t){t instanceof s&&this.views.push(t)},removeView:function(t){for(var e,i=0;i<this.views.length;i+=0)e=this.views[i],e.id===t&&this.views.splice(i,1)},trigger:function(t,e){for(var i,n=0;n<this.views.length;n+=1)i=this.views[n],i.trigger(t,e)}};var r=e.Model=function(t){var e=t||{};for(var i in e)this[i]=e[i];this.id||(this.id="m"+Math.floor(1e5*Math.random()+1)),this._events||(this._events={}),this.data||(this.data={}),this.url||(this.url=""),this._init(t)};r.prototype={onDOMReady:e.onDOMReady,_init:function(t){this.initialize(t)},_ajax:function(t){var e=this,i=new XMLHttpRequest;t||(t={}),t.url||(t.url=this.url),t.type||(t.type="GET"),t.success||(t.success=function(t){this.data=t}),t.error||(t.error=function(){}),i.open(t.type,t.url,!0),i.onload=function(){if(i.status>=200&&i.status<400){var n=JSON.parse(i.responseText);t.success.call(e,n)}else t.error.call(e,i.status)},i.onerror=function(){t.error.call(this)},i.send()},initialize:function(t){},get:function(t){return t?this.data?this.data[t]:void 0:this.data},set:function(t,e){"string"==typeof t?this.data[t]=e:"object"==typeof t&&(this.data=t),this.trigger("change",this.data)},unSet:function(t){this.data&&this.data[t]&&(delete this.data[t],this.trigger("change",this.data))},clear:function(){this.data={},this.trigger("change",this.data)},on:function(t,e,i){i||(i=this),this._events[t]={callback:e,ctx:i}},sync:function(t){this._ajax(t)},trigger:function(t,e){var i=this._events[t];i&&i.callback.call(i.ctx,e)}};var s=e.View=function(t){var i=t||{};for(var n in i)this[n]=i[n];this.id||(this.id="v"+Math.floor(1e5*Math.random()+1)),this.app&&this.app.addView(this),this._events||(this._events={}),this.events||(this.events={}),e.onDOMReady(this._init,t,this)};s.prototype={_setElement:function(e){if(e.isSelectorObject)this.el=e;else if(e instanceof NodeList)this.el=new i(e);else if("string"==typeof e)this.el=new i(t.document.querySelectorAll(e));else{if(!(e instanceof HTMLElement))throw"el selector must be of type String, NodeList, HTMLElement or Ity.SelectorObject";this.el=new i([HTMLElement])}},_bindDOMEvents:function(t){var e;for(evtString in t)if(this.el&&this.el.length>0&&this.el.isSelectorObject)for(var i=0;i<this.el.length;i+=1)e=this.el[i].querySelectorAll(evtString),this._bindNodeElmsEvents(e,t,evtString)},_bindNodeElmsEvents:function(t,e,i){for(var n=0;n<t.length;n+=1)for(var r in e[i])this._bindElmEvent(t[n],r,this[e[i][r]])},_bindElmEvent:function(t,e,i){var n=this;t.addEventListener(e,function(t){i.call(n,t)})},_init:function(t){this.el&&this._setElement(this.el),this._bindDOMEvents(this.events),this.initialize(t)},initialize:function(t){},getName:function(){return this.name},get:function(t){return this[t]},set:function(t,e){this[t]=e},on:function(t,e,i){i||(i=this),this._events[t]={callback:e,ctx:i}},remove:function(){this.el.remove(),this.app&&this.app.removeView(this.id)},trigger:function(t,e){var i=this._events[t];i&&i.callback.call(i.ctx,e)},select:function(t,e){var e=e||this.el;if(e instanceof HTMLElement||e instanceof HTMLDocument)return new i(e.querySelectorAll(t));if(e.isSelectorObject)return e.find(t);throw"Context passed to .select() must be an HTMLElement or an Ity.SelectorObject"}},"function"==typeof define&&define.amd?define(function(){return t.Ity=e,e}):t.Ity=e}(window);
//# sourceMappingURL=ity.min.js.map