(()=>{var{defineProperty:p,getOwnPropertyNames:L,getOwnPropertyDescriptor:T}=Object,w=Object.prototype.hasOwnProperty;var M=new WeakMap,_=(a)=>{var r=M.get(a),l;if(r)return r;if(r=p({},"__esModule",{value:!0}),a&&typeof a==="object"||typeof a==="function")L(a).map((c)=>!w.call(r,c)&&p(r,c,{get:()=>a[c],enumerable:!(l=T(a,c))||l.enumerable}));return M.set(a,r),r};var O=(a,r)=>{for(var l in r)p(a,l,{get:r[l],enumerable:!0,configurable:!0,set:(c)=>r[l]=()=>c})};var k={};O(k,{default:()=>j});var H=function(a){let r={version:"1.0.0"},l={rclass:/[\t\r\n\f]/g,rnotwhite:/\S/,nospaces:/^\S*$/};class c{isSelectorObject=!0;nodes=[];constructor(e=[]){this.nodes=Array.from(e),this.nodes.forEach((t,s)=>this[s]=t)}get length(){return this.nodes.length}[Symbol.iterator](){return this.nodes[Symbol.iterator]()}find(e){let t=[];for(let s of this.nodes){let n=s.querySelectorAll(e);for(let i of Array.from(n)){let o=i;if(t.indexOf(o)<0)t.push(o)}}return new c(t)}filter(e){let t=[];for(let s of this.nodes)if(s.matches(e))t.push(s);return new c(t)}first(){return new c(this[0]?[this[0]]:[])}last(){return new c(this.length?[this[this.length-1]]:[])}parent(){let e=[];for(let t of this.nodes){let s=t.parentElement;if(s&&e.indexOf(s)<0)e.push(s)}return new c(e)}children(e){let t=[];for(let s of this.nodes){let n=Array.from(s.children);for(let i of n)if(t.indexOf(i)<0&&(!e||i.matches(e)))t.push(i)}return new c(t)}remove(){for(let e of this.nodes)if(e.parentElement)e.parentElement.removeChild(e);return new c([])}addClass(...e){for(let t of this.nodes)t.classList.add(...e);return this}removeClass(e){if(e&&l.nospaces.test(e)){for(let t of this.nodes)if(t.classList.contains(e))t.classList.remove(e)}return this}toggleClass(e){if(e&&l.nospaces.test(e))for(let t of this.nodes)t.classList.toggle(e);return this}hasClass(e){if(!(e&&l.nospaces.test(e)))return!1;for(let t of this.nodes)if(t.classList.contains(e))return!0;return!1}before(e){return this._html(e,"beforebegin")}after(e){return this._html(e,"afterend")}append(e){return this._html(e,"beforeend")}prepend(e){return this._html(e,"afterbegin")}html(e){return this._html(e,"replace")}_html(e,t){let s=e.isSelectorObject===!0;for(let n of this.nodes)if(!s){let i=e.outerHTML??String(e);if(t==="replace")n.innerHTML=i;else n.insertAdjacentHTML(t,i)}else{let i=Array.from(e).map((o)=>o.outerHTML);if(t==="replace")n.innerHTML=i.join("");else for(let o of i)n.insertAdjacentHTML(t,o)}return this}}function f(e,t=[],s=r){let n=()=>e.apply(s,t);if(document.readyState!=="loading")n();else document.addEventListener("DOMContentLoaded",n)}class h{id;data;url;_events;constructor(e={}){Object.assign(this,e),this.id||(this.id=`m${Math.floor(Math.random()*1e5)+1}`),this._events||(this._events={}),this.data||(this.data={}),this.url||(this.url=""),this._init(e)}onDOMReady=f;_init(e){this.initialize(e)}_ajax(e={}){let t=this,s=new XMLHttpRequest;e.url||=this.url,e.type||="GET",e.success||=function(n){this.data=n},e.error||=function(){},s.open(e.type,e.url,!0),s.onload=function(){if(s.status>=200&&s.status<400){let n=JSON.parse(s.responseText);e.success.call(t,n)}else e.error.call(t,s.status)},s.onerror=function(){e.error.call(t)},s.send()}initialize(e){}get(e){if(!e)return this.data;return this.data?this.data[e]:void 0}set(e,t){if(typeof e==="string")this.data[e]=t;else if(typeof e==="object")this.data=e;this.trigger("change",this.data)}unSet(e){if(this.data&&Object.prototype.hasOwnProperty.call(this.data,e))delete this.data[e],this.trigger("change",this.data)}clear(){this.data={},this.trigger("change",this.data)}on(e,t,s=this){(this._events[e]||=[]).push({callback:t,ctx:s})}off(e,t,s){if(!e){this._events={};return}let n=this._events[e];if(!n)return;if(!t){delete this._events[e];return}for(let i=n.length-1;i>=0;i--){let o=n[i];if(o.callback===t&&(s===void 0||o.ctx===s))n.splice(i,1)}if(n.length===0)delete this._events[e]}sync(e){this._ajax(e)}trigger(e,t){let s=this._events[e];if(s)for(let n of s)n.callback.call(n.ctx,t)}}class u{id;el;app;name;events;_events;constructor(e={}){if(Object.assign(this,e),this.id||(this.id=`v${Math.floor(Math.random()*1e5)+1}`),this.app)this.app.addView(this);this._events||(this._events={}),this.events||(this.events={}),f(this._init,[e],this)}_setElement(e){if(e?.isSelectorObject)this.el=e;else if(e instanceof NodeList)this.el=new c(e);else if(typeof e==="string")this.el=new c(a.document.querySelectorAll(e));else if(e instanceof HTMLElement)this.el=new c([e]);else throw new Error("el selector must be of type String, NodeList, HTMLElement or Ity.SelectorObject")}_bindDOMEvents(e){if(!this.el||!this.el.isSelectorObject)return;let t=["focus","blur"];for(let s in e)for(let n in e[s]){let i=this[e[s][n]],o=t.includes(n);this._delegateEvent(s,n,i,o)}}_delegateEvent(e,t,s,n=!1){for(let i of this.el)i.addEventListener(t,(o)=>{let d=o.target;while(d){if(d.matches&&d.matches(e)){s.call(this,o);break}if(d===i)break;d=d.parentElement}},n)}_init(e){if(this.el)this._setElement(this.el);this._bindDOMEvents(this.events),this.initialize(e)}initialize(e){}getName(){return this.name}get(e){return this[e]}set(e,t){this[e]=t}on(e,t,s=this){(this._events[e]||=[]).push({callback:t,ctx:s})}off(e,t,s){if(!e){this._events={};return}let n=this._events[e];if(!n)return;if(!t){delete this._events[e];return}for(let i=n.length-1;i>=0;i--){let o=n[i];if(o.callback===t&&(s===void 0||o.ctx===s))n.splice(i,1)}if(n.length===0)delete this._events[e]}remove(){if(this.el.remove(),this.app)this.app.removeView(this.id)}trigger(e,t){let s=this._events[e];if(s)for(let n of s)n.callback.call(n.ctx,t)}select(e,t=this.el){if(t instanceof HTMLElement||t instanceof HTMLDocument)return new c(t.querySelectorAll(e));else if(t.isSelectorObject)return t.find(e);throw new Error("Context passed to .select() must be an HTMLElement or an Ity.SelectorObject")}}class v{views=[];getView(e){for(let t of this.views)if(t.id===e)return t;return}addView(e){if(e instanceof u)this.views.push(e)}removeView(e){for(let t=0;t<this.views.length;t++)if(this.views[t].id===e)this.views.splice(t,1)}trigger(e,t){for(let s of this.views)s.trigger(e,t)}}class m{models=[];url;ModelClass;constructor(e=[],t=h){this.ModelClass=t,this.url="",e.forEach((s)=>this.add(s))}get(e){for(let t of this.models)if(t.id===e)return t;return}add(e){if(e instanceof h)this.models.push(e)}remove(e){let t=typeof e==="string"?this.get(e):e;if(!t)return;let s=this.models.indexOf(t);if(s>=0)this.models.splice(s,1)}at(e){return this.models[e]}get length(){return this.models.length}clear(){this.models=[]}find(e){for(let t of this.models)if(e(t))return t;return}filter(e){let t=[];for(let s of this.models)if(e(s))t.push(s);return t}toJSON(){return this.models.map((e)=>e.get())}_ajax(e={}){let t=this,s=new XMLHttpRequest;e.url||=this.url,e.type||="GET",e.success||=function(){},e.error||=function(){},s.open(e.type,e.url,!0),s.onload=function(){if(s.status>=200&&s.status<400){let n=JSON.parse(s.responseText);e.success.call(t,n)}else e.error.call(t,s.status)},s.onerror=function(){e.error.call(t)},s.send()}fetch(e={}){e.success||=function(t){let s=e.modelClass||this.ModelClass;this.clear(),t.forEach((n)=>{let i=new s;i.set(n),this.add(i)})},this._ajax(e)}trigger(e,t){for(let s of this.models)s.trigger(e,t)}}class y{routes=[];listener;started=!1;constructor(){this.listener=this._checkUrl.bind(this),this.start()}addRoute(e,t){let s=[],n=new RegExp("^"+e.replace(/\/?$/,"").replace(/:[^/]+/g,(i)=>{return s.push(i.slice(1)),"([^/]+)"})+"/?$");this.routes.push({re:n,keys:s,handler:t})}navigate(e){a.history.pushState(null,"",e),this._checkUrl()}start(){if(!this.started)a.addEventListener("popstate",this.listener),this.started=!0;this._checkUrl()}stop(){if(this.started)a.removeEventListener("popstate",this.listener),this.started=!1}_checkUrl(){let e=a.location.pathname.replace(/[?#].*$/,"").replace(/\/?$/,"");for(let t of this.routes){let s=t.re.exec(e);if(s){let n={};t.keys.forEach((o,d)=>n[o]=s[d+1]);let i=(o)=>{if(o=o.replace(/^[?#]/,""),!o)return;new URLSearchParams(o).forEach((b,E)=>{n[E]=b})};i(a.location.search),i(a.location.hash),t.handler(n);break}}}}if(r.SelectorObject=c,r.onDOMReady=f,r.Model=h,r.View=u,r.Application=v,r.Collection=m,r.Router=y,typeof define==="function"&&define.amd)define(function(){if(typeof a!=="undefined")a.Ity=r;return r});else if(typeof g==="object"&&typeof g.exports!=="undefined")g.exports=r;if(typeof a!=="undefined")a.Ity=r;return r}(typeof window!=="undefined"?window:{}),j=H;})();

//# debugId=F7F569FAF5758ACE64756E2164756E21
//# sourceMappingURL=Ity.js.map
