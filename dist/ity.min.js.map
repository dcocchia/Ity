{"version":3,"sources":["ity.js"],"names":["window","Ity","version","SelectorObject","nodeList","selectorObject","Object","create","Array","prototype","apply","prop","hasOwnProperty","i","length","isSelectorObject","constructor","find","selector","thisNodeList","thisNode","this","querySelectorAll","j","indexOf","push","filter","matches","first","last","parent","parentNode","children","thisNodeChildren","remove","parentElement","removeChild","before","content","_html","after","append","prepend","html","position","selectorNode","insertAdjacentHTML","outerHTML","innerHTML","onDOMReady","fn","args","context","func","document","readyState","addEventListener","Application","opts","views","getView","id","view","addView","View","removeView","thisView","splice","trigger","evtName","data","Model","options","option","Math","floor","random","_events","url","_init","initialize","_ajax","model","request","XMLHttpRequest","type","success","resp","error","open","onload","status","JSON","parse","responseText","call","onerror","send","get","attr","undefined","set","value","unSet","clear","on","callback","ctx","sync","evt","app","events","_setElement","elSelector","el","NodeList","HTMLElement","_bindDOMEvents","evtObj","elmToBind","evtString","_bindNodeElmsEvents","node","idx","_bindElmEvent","elm","DOMEvent","self","e","getName","name","select","HTMLDocument","define","amd"],"mappings":"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","file":"ity.min.js","sourcesContent":["// Ity.js 0.1.2\n// (c) 2015 Dominic Cocchiarella\n// Ity may be freely distributed under the MIT license.\n\n;(function(window) {\n\n\tvar Ity = {\n\t\tversion: \"0.1.2\"\n\t}\n\n\tvar SelectorObject = Ity.SelectorObject = function(nodeList) {\n\n\t\tvar selectorObject = Object.create(Array.prototype);\n\n\t\tselectorObject = Array.apply(selectorObject);\n\n\t\tfor (var prop in SelectorObject.prototype){\n\t\t\tif (SelectorObject.prototype.hasOwnProperty(prop)){\n\t\t\t\tselectorObject[prop] = SelectorObject.prototype[prop];\n\t\t\t}\n\t\t}\n\n\t\tfor ( var i = 0; i < nodeList.length; i++ ) {\n\t\t\tselectorObject[i] = nodeList[i];\n\t\t}\n\n\t\t//hack to get around instanceof checks only returning false\n\t\tselectorObject.isSelectorObject = true;\n\n\t\t//now we get an Array-like interface with custom prototype methods\n\t\treturn selectorObject;\n\n\t}\n\t\t\n\tSelectorObject.prototype = {\n\t\tconstructor: SelectorObject,\n\t\tfind: function(selector) {\n\t\t\tvar nodeList = [],\n\t\t\t\tthisNodeList, thisNode;\n\n\t\t\tfor ( var i = 0; i < this.length; i++ ) {\n\t\t\t\tthisNodeList = this[i].querySelectorAll(selector);\n\n\t\t\t\tfor ( var j = 0; j < thisNodeList.length; j++ ) {\n\t\t\t\t\tthisNode = thisNodeList[j];\n\n\t\t\t\t\tif (thisNode && nodeList.indexOf(thisNode) < 0) {\n\t\t\t\t\t\tnodeList.push(thisNode);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tj = 0;\n\t\t\t}\n\n\t\t\treturn new SelectorObject(nodeList);\n\t\t},\n\n\t\tfilter: function(selector) {\n\t\t\tvar nodeList = [],\n\t\t\t\tthisNode;\n\n\t\t\tfor (var i = 0; i < this.length; i++) {\n\t\t\t\tthisNode = this[i];\n\n\t\t\t\tif (thisNode.matches(selector)) {\n\t\t\t\t\tnodeList.push(thisNode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn new SelectorObject(nodeList);\n\t\t},\n\n\t\tfirst: function() {\n\t\t\tvar nodeList = (this[0]) ? [this[0]] : [];\n\t\t\t\n\t\t\treturn new SelectorObject(nodeList);\n\t\t},\n\n\t\tlast: function() {\n\t\t\tvar nodeList = (this[this.length - 1]) ? [this[this.length - 1]] : [];\n\t\t\t\n\t\t\treturn new SelectorObject(nodeList);\n\t\t},\n\n\t\tparent: function() {\n\t\t\tvar nodeList = [],\n\t\t\t\tthisNode;\n\n\t\t\tfor ( var i = 0; i < this.length; i++ ) {\n\t\t\t\tthisNode = this[i].parentNode;\n\n\t\t\t\tif (nodeList.indexOf(thisNode) < 0) {\n\t\t\t\t\tnodeList.push(thisNode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn new SelectorObject(nodeList);\n\t\t},\n\n\t\tchildren: function(selector) {\n\t\t\tvar nodeList = [],\n\t\t\t\tthisNodeChildren,\n\t\t\t\tthisNode;\n\n\t\t\tfor ( var i = 0; i < this.length; i++ ) {\n\t\t\t\tthisNodeChildren = this[i].children;\n\n\t\t\t\tfor ( var j = 0; j < thisNodeChildren.length; j++ ) {\n\t\t\t\t\tthisNode = thisNodeChildren[j];\n\n\t\t\t\t\tif (thisNode && nodeList.indexOf(thisNode) < 0 \n\t\t\t\t\t\t&& (!selector || thisNode.matches(selector)) ) {\n\t\t\t\t\t\tnodeList.push(thisNode);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tj = 0;\n\t\t\t\t\n\t\t\t}\n\n\t\t\treturn new SelectorObject(nodeList);\n\t\t},\n\n\t\tremove: function() {\n\t\t\tfor ( var i = 0; i < this.length; i++ ) {\n\t\t\t\tthis[i].parentElement.removeChild(this[i]);\n\t\t\t}\n\n\t\t\treturn new SelectorObject([]);\n\t\t},\n\n\t\tbefore: function(content) {\n\t\t\treturn this._html(content, 'beforebegin', content.isSelectorObject);\n\t\t},\n\n\t\tafter: function(content) {\n\t\t\treturn this._html(content, 'afterend', content.isSelectorObject);\n\t\t},\n\n\t\tappend: function(content) {\n\t\t\treturn this._html(content, 'beforeend', content.isSelectorObject);\n\t\t},\n\n\t\tprepend: function(content) {\n\t\t\treturn this._html(content, 'afterbegin', content.isSelectorObject);\n\t\t},\n\n\t\thtml: function(content) {\n\t\t\treturn this._html(content, 'replace', content.isSelectorObject);\n\t\t},\n\n\t\t_html: function(content, position, isSelectorObject) {\n\t\t\tvar contentType = typeof(content),\n\t\t\t\tthisNode, selectorNode;\n\n\t\t\tfor ( var i = 0; i < this.length; i++ ) {\n\t\t\t\tthisNode = this[i];\n\t\t\t\tif (!isSelectorObject) {\n\t\t\t\t\tif (position !== \"replace\") {\n\t\t\t\t\t\tthisNode.insertAdjacentHTML(position, ((content.outerHTML) ? content.outerHTML : content ));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthisNode.innerHTML = (content.outerHTML) ? content.outerHTML : content;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor ( var j = 0; j < content.length; j++ ) {\n\t\t\t\t\t\tselectorNode = content[j];\n\t\t\t\t\t\tif (position !== \"replace\") {\n\t\t\t\t\t\t\tthisNode.insertAdjacentHTML(position, selectorNode.outerHTML);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthisNode.innerHTML = selectorNode.outerHTML;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tj = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t}\n\t}\n\n\tIty.onDOMReady = function(fn, args, context) {\n\t\targs || (args = []);\n\t\tcontext || (context = this);\n\n\t\tfunc = function() {\n\t\t\tfn.apply(context, args);\n\t\t}\n\n\t\tif (document.readyState != 'loading'){\n\t\t\tfunc();\n\t\t} else {\n\t\t\tdocument.addEventListener('DOMContentLoaded', func);\n\t\t}\n\t}\n\n\tvar Application = Ity.Application = function(opts) {\n\t\tthis.views = [];\n\t}\n\n\tApplication.prototype = {\n\t\tgetView: function(id) {\n\t\t\tfor (var view in this.views) {\n\t\t\t\tif (this.views[view].id === id) {\n\t\t\t\t\treturn this.views[view];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\taddView: function(view) {\n\t\t\tif (view instanceof View) { this.views.push(view); }\n\t\t},\n\n\t\tremoveView: function(id) {\n\t\t\tvar thisView;\n\n\t\t\tfor (var i = 0; i < this.views.length; i += 0) {\n\t\t\t\tthisView = this.views[i];\n\t\t\t\tif (thisView.id === id) {\n\t\t\t\t\t this.views.splice(i, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\ttrigger: function(evtName, data) {\n\t\t\tvar thisView;\n\n\t\t\tfor (var i = 0; i < this.views.length; i += 1) {\n\t\t\t\tthisView = this.views[i];\n\t\t\t\tthisView.trigger(evtName, data);\n\t\t\t}\n\t\t}\n\t}\n\n\tvar Model = Ity.Model = function(opts) {\n\t\tvar options = opts || {};\n\n\t\tfor (var option in options) {\n\t\t\tthis[option] = options[option];\n\t\t}\n\n\t\tthis.id || (this.id = \"m\" + Math.floor((Math.random() * 100000) + 1));\n\t\tthis._events || (this._events = {});\n\t\tthis.data || (this.data = {});\n\t\tthis.url || (this.url = \"\");\n\n\t\tthis._init(opts);\n\t}\n\n\tModel.prototype = {\n\t\tonDOMReady: Ity.onDOMReady, //just for easier access within View logic\n\n\t\t_init: function(opts) {\n\t\t\tthis.initialize(opts);\n\t\t},\n\n\t\t_ajax: function(opts) {\n\t\t\tvar model = this;\n\t\t\tvar request = new XMLHttpRequest();\n\n\t\t\topts || (opts = {});\n\t\t\topts.url || (opts.url = this.url);\n\t\t\topts.type || (opts.type = 'GET');\n\t\t\topts.success || (opts.success = function(resp) { this.data = resp; });\n\t\t\topts.error || (opts.error = function(){});\n\n\t\t\trequest.open(opts.type, opts.url, true);\n\n\t\t\trequest.onload = function() {\n\t\t\t\tif (request.status >= 200 && request.status < 400) {\n\t\t\t\t\tvar resp = JSON.parse(request.responseText);\n\t\t\t\t\topts.success.call(model, resp);\n\t\t\t\t} else {\n\t\t\t\t\topts.error.call(model, request.status);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\trequest.onerror = function() {\n\t\t\t\topts.error.call(this);\n\t\t\t};\n\n\t\t\trequest.send();\n\t\t},\n\n\t\tinitialize: function(options) {},\n\n\t\tget: function(attr) {\n\t\t\tif (!attr) {\n\t\t\t\treturn this.data;\n\t\t\t} else {\n\t\t\t\treturn (this.data) ? this.data[attr] : undefined;\n\t\t\t}\n\t\t},\n\n\t\tset: function(attr, value) {\n\n\t\t\tif(typeof(attr) === \"string\") {\n\t\t\t\tthis.data[attr] = value;\n\t\t\t} else if (typeof(attr) === \"object\") {\n\t\t\t\tthis.data = attr;\n\t\t\t}\n\t\t\t\n\t\t\tthis.trigger(\"change\", this.data);\n\t\t},\n\n\t\tunSet: function(attr) {\n\t\t\tif (this.data && this.data[attr]) {\n\t\t\t\tdelete this.data[attr];\n\n\t\t\t\tthis.trigger(\"change\", this.data);\n\t\t\t}\n\t\t},\n\n\t\tclear: function() {\n\t\t\tthis.data = {};\n\t\t\tthis.trigger(\"change\", this.data);\n\t\t},\n\n\t\ton: function(evtName, callback, context) {\n\t\t\tcontext || (context = this);\n\t\t\tthis._events[evtName] = {\n\t\t\t\tcallback: callback,\n\t\t\t\tctx: context\n\t\t\t}\n\t\t},\n\n\t\tsync: function(opts) {\n\t\t\tthis._ajax(opts);\n\t\t},\n\n\t\ttrigger: function(evtName, data) {\n\t\t\tvar evt = this._events[evtName];\n\t\t\tif (evt) {\n\t\t\t\tevt.callback.call(evt.ctx, data);\n\t\t\t}\n\t\t}\n\n\t}\n\n\tvar View = Ity.View = function(opts) {\n\t\tvar options = opts || {};\n\n\t\tfor (var option in options) {\n\t\t\tthis[option] = options[option];\n\t\t}\n\n\t\tthis.id || (this.id = \"v\" + Math.floor((Math.random() * 100000) + 1));\n\t\tif (this.app) { this.app.addView(this); }\n\t\tthis._events || (this._events = {});\n\t\tthis.events || (this.events = {});\n\n\t\tIty.onDOMReady(this._init, opts, this);\n\n\t}\n\n\tView.prototype = {\n\n\t\t_setElement: function(elSelector) {\n\t\t\tif (elSelector.isSelectorObject) {\n\t\t\t\tthis.el = elSelector;\n\t\t\t} else if (elSelector instanceof NodeList) {\n\t\t\t\tthis.el = new SelectorObject(elSelector);\n\t\t\t} else if (typeof(elSelector) === \"string\") {\n\t\t\t\tthis.el = new SelectorObject(window.document.querySelectorAll(elSelector) );\n\t\t\t} else if (elSelector instanceof HTMLElement) {\n\t\t\t\tthis.el = new SelectorObject([HTMLElement]);\n\t\t\t} else {\n\t\t\t\tthrow \"el selector must be of type String, NodeList, HTMLElement or Ity.SelectorObject\";\n\t\t\t}\n\t\t},\n\n\t\t_bindDOMEvents: function(evtObj) {\n\t\t\tvar elmToBind;\n\n\t\t\tfor (evtString in evtObj) {\n\t\t\t\tif (this.el) {\n\n\t\t\t\t\tif (this.el.length > 0 && this.el.isSelectorObject) {\n\t\t\t\t\t\tfor (var i = 0; i < this.el.length; i += 1) {\n\t\t\t\t\t\t\telmToBind = this.el[i].querySelectorAll(evtString);\n\n\t\t\t\t\t\t\tthis._bindNodeElmsEvents(elmToBind, evtObj, evtString);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_bindNodeElmsEvents: function(node, evtObj, evtString) {\n\t\t\tfor (var idx = 0; idx < node.length; idx += 1) {\n\n\t\t\t\tfor (var evt in evtObj[evtString]) {\n\t\t\t\t\tthis._bindElmEvent(node[idx], evt, this[evtObj[evtString][evt]]);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_bindElmEvent: function(elm, DOMEvent, callback) {\n\t\t\tvar self = this;\n\n\t\t\telm.addEventListener(DOMEvent, function(e) {\n\t\t\t\tcallback.call(self, e);\n\t\t\t});\n\t\t},\n\n\t\t_init: function(opts) {\n\t\t\tif (this.el) { this._setElement(this.el); }\n\t\t\tthis._bindDOMEvents(this.events);\n\n\t\t\tthis.initialize(opts);\n\t\t},\n\n\t\tinitialize: function(opts) {},\n\n\t\tgetName: function() {\n\t\t\treturn this.name;\n\t\t},\n\n\t\tget: function(attr) {\n\t\t\treturn this[attr];\n\t\t},\n\n\t\tset: function(attr, value) {\n\t\t\tthis[attr] = value;\n\t\t},\n\n\t\ton: function(evtName, callback, context) {\n\t\t\tcontext || (context = this);\n\t\t\tthis._events[evtName] = {\n\t\t\t\tcallback: callback,\n\t\t\t\tctx: context\n\t\t\t}\n\t\t},\n\n\t\tremove: function() {\n\t\t\tthis.el.remove();\n\t\t\tif (this.app) { this.app.removeView(this.id); }\n\t\t},\n\n\t\ttrigger: function(evtName, data) {\n\t\t\tvar evt = this._events[evtName];\n\t\t\tif (evt) { evt.callback.call(evt.ctx, data); }\n\t\t},\n\n\t\tselect: function( selector, ctx ) {\n\t\t\tvar ctx = ctx || this.el;\n\n\t\t\tif (ctx instanceof HTMLElement || ctx instanceof HTMLDocument) {\n\t\t\t\treturn new SelectorObject(ctx.querySelectorAll(selector));\n\t\t\t} else if (ctx.isSelectorObject){\n\t\t\t\treturn ctx.find(selector); //already a SelectorObject\n\t\t\t} else {\n\t\t\t\tthrow \"Context passed to .select() must be an HTMLElement or an Ity.SelectorObject\";\n\t\t\t}\n\n\t\t}\n\t}\n\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(function() {\n\t\t\twindow.Ity = Ity;\n\t\t\treturn Ity;\n\t\t});\n\t} else {\n\t\twindow.Ity = Ity;\n\t}\n\n})(window);"],"sourceRoot":"/source/"}